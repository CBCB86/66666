<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›…æ¸…ï¼Œç”Ÿæ—¥å¿«ä¹ï¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B8B',
                        secondary: '#FFC3D1',
                        accent: '#FF9AA2',
                        dark: '#2A2A2A',
                        light: '#FFF5F7',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }
            .animate-float {
                animation: float 6s ease-in-out infinite;
            }
            .animate-sparkle {
                animation: sparkle 2s infinite;
            }
            .animate-bounce-slow {
                animation: bounce 3s infinite;
            }
            .card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-8px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        @keyframes sparkle {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
    </style>
</head>
<body class="font-inter bg-gradient-to-br from-light to-secondary min-h-screen">
    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="birthdaySong" loop>
        <source src="https://music.163.com/song/media/outer/url?id=2082151352.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
    </audio>

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md z-50 shadow-md transition-all duration-300" id="navbar">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-primary flex items-center">
                <i class="fa fa-heart text-accent mr-2 animate-pulse"></i>
                é›…æ¸…ç”Ÿæ—¥å¿«ä¹
            </h1>
            <button id="playButton" class="bg-primary hover:bg-primary/80 text-white px-4 py-2 rounded-full flex items-center transition-all duration-300 shadow-md hover:shadow-lg">
                <i class="fa fa-play mr-2" id="playIcon"></i>
                <span id="playText">æ’­æ”¾éŸ³ä¹</span>
            </button>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <!-- æ¬¢è¿æ¨ªå¹… -->
        <section class="relative overflow-hidden rounded-2xl shadow-2xl mb-16 bg-white/50 backdrop-blur-sm">
            <div class="absolute inset-0 bg-gradient-to-r from-primary/30 to-accent/30"></div>
            <div class="relative p-8 md:p-16 text-center">
                <h2 class="text-[clamp(2rem,5vw,4rem)] font-bold text-white text-shadow mb-4">
                    é›…æ¸…ï¼Œç”Ÿæ—¥å¿«ä¹ï¼
                </h2>
                <p class="text-[clamp(1rem,2vw,1.5rem)] text-dark/80 max-w-3xl mx-auto">
                    æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼Œå‹è°Šé•¿å­˜ï¼Œç”Ÿæ—¥å¿«ä¹ï¼
                </p>
                
                <!-- è£…é¥°å…ƒç´  -->
                <div class="absolute -top-10 -left-10 w-40 h-40 bg-primary/20 rounded-full blur-3xl"></div>
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-accent/20 rounded-full blur-3xl"></div>
                
                <!-- æµ®åŠ¨å…ƒç´  -->
                <div class="absolute top-1/4 left-10 animate-float">
                    <i class="fa fa-star text-4xl text-primary/80"></i>
                </div>
                <div class="absolute top-1/3 right-10 animate-float" style="animation-delay: 1s;">
                    <i class="fa fa-heart text-4xl text-accent/80"></i>
                </div>
                <div class="absolute bottom-1/4 left-1/4 animate-float" style="animation-delay: 2s;">
                    <i class="fa fa-gift text-4xl text-primary/80"></i>
                </div>
                <div class="absolute bottom-1/3 right-1/4 animate-float" style="animation-delay: 3s;">
                    <i class="fa fa-birthday-cake text-4xl text-accent/80"></i>
                </div>
            </div>
        </section>

        <!-- å‹è°Šç¥ç¦è¯­ -->
        <section class="mb-16">
            <h3 class="text-3xl font-bold text-center text-dark mb-10">å‹è°Šç¥ç¦è¯­</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- å¡ç‰‡ 1 -->
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                    <div class="text-primary text-4xl mb-4">
                        <i class="fa fa-users"></i>
                    </div>
                    <h4 class="text-xl font-semibold mb-3">è‡´æœ€çè´µçš„æœ‹å‹</h4>
                    <p class="text-dark/80">
                        æ„Ÿè°¢ä½ ä¸€ç›´ä»¥æ¥çš„é™ªä¼´å’Œæ”¯æŒï¼Œæ— è®ºé¡ºå¢ƒè¿˜æ˜¯é€†å¢ƒï¼Œä½ å§‹ç»ˆåœ¨æˆ‘èº«è¾¹ã€‚æ„¿æˆ‘ä»¬çš„å‹è°Šåƒç¾é…’ä¸€æ ·ï¼Œè¶Šä¹…è¶Šé†‡åšã€‚ç”Ÿæ—¥å¿«ä¹ï¼Œæˆ‘çš„æŒšå‹ï¼
                    </p>
                </div>
                
                <!-- å¡ç‰‡ 2 -->
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                    <div class="text-primary text-4xl mb-4">
                        <i class="fa fa-heart"></i>
                    </div>
                    <h4 class="text-xl font-semibold mb-3">å‹è°Šä¹‹å…‰</h4>
                    <p class="text-dark/80">
                        æœ‹å‹æ˜¯ç”Ÿå‘½ä¸­æœ€ç’€ç’¨çš„æ˜Ÿè¾°ï¼Œè€Œä½ æ˜¯å…¶ä¸­æœ€äº®çš„ä¸€é¢—ã€‚æ„Ÿè°¢ä½ ç»™æˆ‘çš„ç”Ÿæ´»å¸¦æ¥äº†æ— å°½çš„æ¬¢ä¹å’Œæ¸©æš–ã€‚ç”Ÿæ—¥å¿«ä¹ï¼Œæ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰ï¼
                    </p>
                </div>
                
                <!-- å¡ç‰‡ 3 -->
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                    <div class="text-primary text-4xl mb-4">
                        <i class="fa fa-coffee"></i>
                    </div>
                    <h4 class="text-xl font-semibold mb-3">ä¸€èµ·èµ°è¿‡çš„æ—¥å­</h4>
                    <p class="text-dark/80">
                        è¿˜è®°å¾—æˆ‘ä»¬ä¸€èµ·åº¦è¿‡çš„é‚£äº›ç¾å¥½æ—¶å…‰å—ï¼Ÿæ— è®ºæ˜¯æ¬¢ç¬‘è¿˜æ˜¯æ³ªæ°´ï¼Œéƒ½æ˜¯æˆ‘ä»¬å‹è°Šçš„è§è¯ã€‚æ„¿æœªæ¥è¿˜æœ‰æ›´å¤šçš„ç¾å¥½å›å¿†ç­‰å¾…æˆ‘ä»¬å»åˆ›é€ ã€‚ç”Ÿæ—¥å¿«ä¹ï¼
                    </p>
                </div>
            </div>
        </section>

        <!-- ç”Ÿæ—¥å¿«ä¹ç¥ç¦è¯­ -->
        <section class="mb-16">
            <h3 class="text-3xl font-bold text-center text-dark mb-10">ç”Ÿæ—¥å¿«ä¹ç¥ç¦è¯­</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- å¡ç‰‡ 1 -->
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                    <div class="text-accent text-4xl mb-4">
                        <i class="fa fa-birthday-cake"></i>
                    </div>
                    <h4 class="text-xl font-semibold mb-3">æ–°çš„ä¸€å²ï¼Œæ–°çš„å¼€å§‹</h4>
                    <p class="text-dark/80">
                        æ„¿æ–°çš„ä¸€å²å¸¦ç»™ä½ æ— é™çš„å¯èƒ½å’Œæœºé‡ï¼Œæ¯ä¸€ä¸ªæ¢¦æƒ³éƒ½èƒ½æˆçœŸï¼Œæ¯ä¸€ä¸ªåŠªåŠ›éƒ½èƒ½æœ‰å›æŠ¥ã€‚ç”Ÿæ—¥å¿«ä¹ï¼Œæ„¿ä½ ç»§ç»­é—ªè€€å…‰èŠ’ï¼
                    </p>
                </div>
                
                <!-- å¡ç‰‡ 2 -->
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                    <div class="text-accent text-4xl mb-4">
                        <i class="fa fa-gift"></i>
                    </div>
                    <h4 class="text-xl font-semibold mb-3">ç”Ÿå‘½çš„ç¤¼ç‰©</h4>
                    <p class="text-dark/80">
                        ä½ æ˜¯ä¸Šå¤©èµäºˆæˆ‘ä»¬æœ€çè´µçš„ç¤¼ç‰©ï¼Œä½ çš„ç¬‘å®¹èƒ½ç…§äº®æ•´ä¸ªä¸–ç•Œã€‚æ„¿ä½ çš„ç”Ÿæ´»å¦‚å½©è™¹èˆ¬ç»šä¸½å¤šå½©ï¼Œç”Ÿæ—¥å¿«ä¹ï¼Œæ°¸è¿œå¹´è½»ç¾ä¸½ï¼
                    </p>
                </div>
                
                <!-- å¡ç‰‡ 3 -->
                <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                    <div class="text-accent text-4xl mb-4">
                        <i class="fa fa-star"></i>
                    </div>
                    <h4 class="text-xl font-semibold mb-3">é—ªè€€äººç”Ÿ</h4>
                    <p class="text-dark/80">
                        æ„¿ä½ çš„äººç”Ÿåƒæ˜Ÿæ˜Ÿä¸€æ ·é—ªè€€ï¼Œæ— è®ºèµ°åˆ°å“ªé‡Œéƒ½èƒ½æ•£å‘å‡ºæ¸©æš–å’Œå…‰èŠ’ã€‚ç”Ÿæ—¥å¿«ä¹ï¼Œæ„¿ä½ çš„æœªæ¥å……æ»¡æ— é™çš„ç¾å¥½å’Œå¹¸ç¦ï¼
                    </p>
                </div>
            </div>
        </section>

        <!-- ç”Ÿæ—¥è›‹ç³• -->
        <section class="text-center mb-16">
            <h3 class="text-3xl font-bold text-center text-dark mb-10">ç”Ÿæ—¥å¿«ä¹æ­Œ</h3>
            <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-10 shadow-xl max-w-2xl mx-auto">
                <div class="relative inline-block mb-8">
                    <!-- è›‹ç³•SVG -->
                    <svg viewBox="0 0 200 200" class="w-64 h-64 mx-auto animate-bounce-slow">
                        <!-- ç›˜å­ -->
                        <circle cx="100" cy="180" r="60" fill="#f0f0f0" stroke="#e0e0e0" stroke-width="5" />
                        
                        <!-- è›‹ç³•åº•éƒ¨ -->
                        <rect x="60" y="130" width="80" height="50" rx="10" ry="10" fill="#D2691E" />
                        <rect x="65" y="135" width="70" height="10" rx="5" ry="5" fill="#DEB887" />
                        <rect x="65" y="150" width="70" height="10" rx="5" ry="5" fill="#DEB887" />
                        <rect x="65" y="165" width="70" height="10" rx="5" ry="5" fill="#DEB887" />
                        
                        <!-- è›‹ç³•é¡¶éƒ¨ -->
                        <rect x="50" y="100" width="100" height="30" rx="15" ry="15" fill="#FFB6C1" />
                        <path d="M50,100 Q100,70 150,100" fill="#FFC0CB" />
                        
                        <!-- å¥¶æ²¹è£…é¥° -->
                        <path d="M50,100 Q60,90 70,100 Q80,90 90,100 Q100,90 110,100 Q120,90 130,100 Q140,90 150,100" fill="#FFFFFF" />
                        
                        <!-- èœ¡çƒ› -->
                        <rect x="95" y="70" width="10" height="30" fill="#FF69B4" />
                        <rect x="85" y="75" width="10" height="25" fill="#FF6347" />
                        <rect x="105" y="75" width="10" height="25" fill="#FF6347" />
                        
                        <!-- ç«ç„° -->
                        <circle cx="100" cy="65" r="8" fill="#FFD700" class="animate-sparkle" />
                        <circle cx="90" cy="70" r="6" fill="#FFD700" class="animate-sparkle" style="animation-delay: 0.5s" />
                        <circle cx="110" cy="70" r="6" fill="#FFD700" class="animate-sparkle" style="animation-delay: 1s" />
                    </svg>
                    
                    <!-- è£…é¥°æ˜Ÿæ˜Ÿ -->
                    <div class="absolute -top-5 -left-5 animate-sparkle" style="animation-delay: 0.3s">
                        <i class="fa fa-star text-primary text-2xl"></i>
                    </div>
                    <div class="absolute -top-8 right-10 animate-sparkle" style="animation-delay: 0.7s">
                        <i class="fa fa-star text-accent text-2xl"></i>
                    </div>
                    <div class="absolute bottom-10 -right-5 animate-sparkle" style="animation-delay: 1.2s">
                        <i class="fa fa-star text-primary text-2xl"></i>
                    </div>
                </div>
                
                <!-- éŸ³ä¹æ§åˆ¶å™¨ -->
                <div class="mt-6">
                    <button id="cakePlayButton" class="bg-primary hover:bg-primary/80 text-white px-6 py-3 rounded-full text-lg font-medium flex items-center justify-center mx-auto transition-all duration-300 shadow-lg hover:shadow-xl">
                        <i class="fa fa-music mr-2"></i>
                        ç‚¹å‡»æ’­æ”¾éŸ©ç£Šã€Šç¥ä½ ç”Ÿæ—¥å¿«ä¹ã€‹
                    </button>
                    
                    <div id="progressContainer" class="mt-6 w-full h-2 bg-gray-200 rounded-full overflow-hidden hidden">
                        <div id="progressBar" class="h-full bg-primary transition-all duration-100" style="width: 0%"></div>
                    </div>
                    
                    <p id="songStatus" class="mt-4 text-dark/70 hidden">æ­£åœ¨æ’­æ”¾: éŸ©ç£Šã€Šç¥ä½ ç”Ÿæ—¥å¿«ä¹ã€‹</p>
                </div>
            </div>
        </section>

        <!-- ç•™è¨€åŒº -->
        <section>
            <h3 class="text-3xl font-bold text-center text-dark mb-10">ç»™é›…æ¸…çš„ç•™è¨€</h3>
            <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl max-w-3xl mx-auto">
                <form id="messageForm" class="space-y-6">
                    <div>
                        <label for="name" class="block text-dark font-medium mb-2">ä½ çš„åå­—</label>
                        <input type="text" id="name" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring focus:ring-primary/20 transition-all duration-300" placeholder="è¯·è¾“å…¥ä½ çš„åå­—" required>
                    </div>
                    
                    <div>
                        <label for="message" class="block text-dark font-medium mb-2">ä½ çš„ç¥ç¦</label>
                        <textarea id="message" rows="4" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring focus:ring-primary/20 transition-all duration-300" placeholder="å†™ä¸‹ä½ å¯¹é›…æ¸…çš„ç¥ç¦..." required></textarea>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="bg-primary hover:bg-primary/80 text-white px-6 py-3 rounded-full text-lg font-medium transition-all duration-300 shadow-lg hover:shadow-xl">
                            <i class="fa fa-paper-plane mr-2"></i>
                            å‘é€ç¥ç¦
                        </button>
                    </div>
                </form>
                
                <div id="messages" class="mt-10 space-y-6">
                    <!-- ç¤ºä¾‹ç•™è¨€ -->
                    <div class="bg-light p-6 rounded-xl shadow-md">
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="font-semibold text-primary">å°æ˜</h4>
                            <span class="text-sm text-dark/60">ä»Šå¤© 12:30</span>
                        </div>
                        <p class="text-dark/80">é›…æ¸…ï¼Œç”Ÿæ—¥å¿«ä¹ï¼å¸Œæœ›ä½ æ–°çš„ä¸€å²ä¸€åˆ‡é¡ºåˆ©ï¼Œå¿ƒæƒ³äº‹æˆï¼</p>
                    </div>
                    
                    <div class="bg-light p-6 rounded-xl shadow-md">
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="font-semibold text-primary">å°çº¢</h4>
                            <span class="text-sm text-dark/60">ä»Šå¤© 10:15</span>
                        </div>
                        <p class="text-dark/80">ç¥æˆ‘ä»¬çš„å°ä»™å¥³ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„ç”Ÿæ´»æ°¸è¿œå……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-dark text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>é›…æ¸…ï¼Œç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œå¤©å¤©å¼€å¿ƒï¼ğŸ‰</p>
            <p class="mt-2 text-sm text-white/70">æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡çˆ±ä¸å–œæ‚¦</p>
        </div>
    </footer>

    <!-- è£…é¥°å…ƒç´  -->
    <div class="fixed top-0 left-0 right-0 bottom-0 pointer-events-none z-0">
        <div id="confetti"></div>
    </div>

    <script>
        // éŸ³ä¹æ§åˆ¶
        const birthdaySong = document.getElementById('birthdaySong');
        const playButton = document.getElementById('playButton');
        const playIcon = document.getElementById('playIcon');
        const playText = document.getElementById('playText');
        const cakePlayButton = document.getElementById('cakePlayButton');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const songStatus = document.getElementById('songStatus');
        const navbar = document.getElementById('navbar');
        
        // æ’­æ”¾/æš‚åœéŸ³ä¹
        function togglePlay() {
            if (birthdaySong.paused) {
                birthdaySong.play();
                playIcon.classList.remove('fa-play');
                playIcon.classList.add('fa-pause');
                playText.textContent = 'æš‚åœéŸ³ä¹';
                cakePlayButton.innerHTML = '<i class="fa fa-pause mr-2"></i> æš‚åœéŸ³ä¹';
                progressContainer.classList.remove('hidden');
                songStatus.classList.remove('hidden');
                createConfetti();
            } else {
                birthdaySong.pause();
                playIcon.classList.remove('fa-pause');
                playIcon.classList.add('fa-play');
                playText.textContent = 'æ’­æ”¾éŸ³ä¹';
                cakePlayButton.innerHTML = '<i class="fa fa-music mr-2"></i> ç‚¹å‡»æ’­æ”¾éŸ©ç£Šã€Šç¥ä½ ç”Ÿæ—¥å¿«ä¹ã€‹';
                progressContainer.classList.add('hidden');
                songStatus.classList.add('hidden');
            }
        }
        
        // æ›´æ–°è¿›åº¦æ¡
        birthdaySong.addEventListener('timeupdate', function() {
            const percentage = (birthdaySong.currentTime / birthdaySong.duration) * 100;
            progressBar.style.width = percentage + '%';
        });
        
        // æ­Œæ›²ç»“æŸé‡ç½®æŒ‰é’®
        birthdaySong.addEventListener('ended', function() {
            playIcon.classList.remove('fa-pause');
            playIcon.classList.add('fa-play');
            playText.textContent = 'æ’­æ”¾éŸ³ä¹';
            cakePlayButton.innerHTML = '<i class="fa fa-music mr-2"></i> ç‚¹å‡»æ’­æ”¾éŸ©ç£Šã€Šç¥ä½ ç”Ÿæ—¥å¿«ä¹ã€‹';
            progressContainer.classList.add('hidden');
            songStatus.classList.add('hidden');
        });
        
        // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
        window.addEventListener('scroll', function() {
            if (window.scrollY > 100) {
                navbar.classList.add('py-2');
                navbar.classList.remove('py-3');
            } else {
                navbar.classList.add('py-3');
                navbar.classList.remove('py-2');
            }
        });
        
        // è¡¨å•æäº¤
        const messageForm = document.getElementById('messageForm');
        const messages = document.getElementById('messages');
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç•™è¨€
        function loadMessages() {
            const savedMessages = localStorage.getItem('birthdayMessages');
            if (savedMessages) {
                const messageList = JSON.parse(savedMessages);
                messages.innerHTML = '';
                
                messageList.forEach(msg => {
                    const newMessage = document.createElement('div');
                    newMessage.className = 'bg-light p-6 rounded-xl shadow-md';
                    newMessage.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="font-semibold text-primary">${msg.name}</h4>
                            <span class="text-sm text-dark/60">${msg.time}</span>
                        </div>
                        <p class="text-dark/80">${msg.message}</p>
                    `;
                    messages.prepend(newMessage);
                });
            }
        }
        
        // ä¿å­˜ç•™è¨€åˆ°æœ¬åœ°å­˜å‚¨
        function saveMessage(name, message) {
            const now = new Date();
            const timeString = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const newMessage = {
                name: name,
                message: message,
                time: timeString
            };
            
            let messageList = [];
            const savedMessages = localStorage.getItem('birthdayMessages');
            if (savedMessages) {
                messageList = JSON.parse(savedMessages);
            }
            
            messageList.unshift(newMessage); // æ·»åŠ åˆ°å¼€å¤´
            localStorage.setItem('birthdayMessages', JSON.stringify(messageList));
            
            return newMessage;
        }
        
        messageForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const message = document.getElementById('message').value;
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const savedMessage = saveMessage(name, message);
            
            // åˆ›å»ºæ–°çš„ç•™è¨€å…ƒç´ 
            const newMessage = document.createElement('div');
            newMessage.className = 'bg-light p-6 rounded-xl shadow-md transform transition-all duration-500 opacity-0 translate-y-4';
            newMessage.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <h4 class="font-semibold text-primary">${savedMessage.name}</h4>
                    <span class="text-sm text-dark/60">${savedMessage.time}</span>
                </div>
                <p class="text-dark/80">${savedMessage.message}</p>
            `;
            
            // æ·»åŠ åˆ°ç•™è¨€åˆ—è¡¨
            messages.prepend(newMessage);
            
            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                newMessage.classList.remove('opacity-0', 'translate-y-4');
            }, 10);
            
            // æ¸…ç©ºè¡¨å•
            messageForm.reset();
            
            // åˆ›å»ºåº†ç¥æ•ˆæœ
            createConfetti();
        });
        
        // ç‚¹å‡»è›‹ç³•æŒ‰é’®æ’­æ”¾éŸ³ä¹
        cakePlayButton.addEventListener('click', togglePlay);
        playButton.addEventListener('click', togglePlay);
        
        // åˆ›å»ºåº†ç¥å½©å±‘
        function createConfetti() {
            const confetti = document.getElementById('confetti');
            confetti.innerHTML = '';
            
            for (let i = 0; i < 100; i++) {
                const confettiPiece = document.createElement('div');
                const size = Math.random() * 10 + 5;
                const left = Math.random() * 100;
                const delay = Math.random() * 5;
                const duration = Math.random() * 10 + 10;
                
                confettiPiece.style.position = 'absolute';
                confettiPiece.style.width = `${size}px`;
                confettiPiece.style.height = `${size}px`;
                confettiPiece.style.background = getRandomColor();
                confettiPiece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confettiPiece.style.left = `${left}%`;
                confettiPiece.style.top = '-10%';
                confettiPiece.style.transform = 'rotate(' + Math.random() * 360 + 'deg)';
                confettiPiece.style.opacity = Math.random() * 0.8 + 0.2;
                confettiPiece.style.animation = `confetti ${duration}s ease ${delay}s forwards`;
                
                confetti.appendChild(confettiPiece);
            }
            
            // æ·»åŠ å½©å±‘åŠ¨ç”»æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                @keyframes confetti {
                    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
        
        // è·å–éšæœºé¢œè‰²
        function getRandomColor() {
            const colors = ['#FF6B8B', '#FF9AA2', '#FFB7B2', '#FFDAC1', '#E2F0CB', '#B5EAD7', '#C7CEEA'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        // é¡µé¢åŠ è½½æ—¶åŠ è½½ç•™è¨€
        document.addEventListener('DOMContentLoaded', loadMessages);
    </script>
</body>
</html>
    
